// (C)opyright Instadia A/S 2000-2006
// Date: 10/26/06  Source: stable/gui/js/gather/clientstep.js  Revision: 10128
eval((function(){var R='function~nstadia_~return~.length~var ~.substring(~;if(~this.~r+=String.fromCharCode(~;}`0 $~.indexOf(~continue;~cookie~;_.I`1~);p("CS~){`4~I`1Survey_checkForManualTrigge~(new Date()).getTime()~for(`4i=0;i<~.charCodeAt(~=new B(~){if(~ridge~c=c?""+c:CSid`6c=="00000")c=""~=`0(~){e();`B}if(~typeof ~etArray~`3;++i~`N`6c&&c`3!=5)c="BADID"~document~.match(/~`7`CList~else ~+"&"+~domain~name~_._I`1exporter~){H("RES","~.charAt(~`7prefix~:n`Dsend~break;~;for(~);}`~parseInt(~_I`1event~),0x80+(c~_.I`1Survey_context~i=d.lastIndexOf("."~){`7stash.read();`4~)`2;~`7oldParts~);`2~while(i<n`Fc=s`Ji~applyB`M~m.i`1~){`2 ~(s){`0 e(){r+="\\xEF\\xBF\\xBD";}~`4n=s`3;`4i=0;while(i<n&&s`Ji)~`x<128)++i`6i==n)`2 s;`4r=s`50~`y,i);`s++)`6c<0x80){`8c);`B}i~'.split("~");var S='(`0(`F_=window,A=`U,$N=A.referrer,R=A.location,M=R.protocol,G=navigator,I="undefined"`6`b){`b(`r;}if(M!="https:")M="http:"`6G.userAgent`Vaol.+9.0/gi))M="https:";`0 p(n,v`L`Q_[n]==I)_[n]=v;}p("CSenable",1`Eurl","www.instadia.net/cgi-bin"`Esd",""`Emaxb`M",500`Emaxpersist",1`Esessiononly",false`E`C`a",""`Evalidatevid",1`Ecustomvid",""`Edebug",0`Escrerr",0`Eid",""`Etitle",""`Epath",""`Eonload",1`EinfoOnload",0`Etpc",true`Emaxcache",-1`Esu",0`Esid",CSid`Esl","survey.instadia.net"`Esc","www.clientstep.net"`Econtext","")`6`QI`1Use_Onload!=I)CSonload=I`1Use_Onload`6G.appName=="Netscape"&&G.userAgent.match(new RegExp("^Mozilla/(2|3|4\\.0[0-9])","")))CSenable=0;`4O,$c,Y,N=[],P=[],$Q=1,$u,$U="gatherfpc",$X="gatherudfpc",$D="uid",$n="",$3="",$d=10,L,$7,W,T=[],$1=1,Z=1;`0 $R(`Fb=$a("csb`M")`6!b`p`4i=b`A".")`6i<0||`jb`50,i))!=b`3-i-1`cBad CSb`M parameter"`r;}`4j=b`A"%13",++i)`6j<0`pC.`t(b`5i,j));C.`t(b`5j+3))`9o(`Fp="CSb`M=";`4l=CSmaxb`M-p`3-8;`4v=C.getB`M(l)+"%13";v+=E.getB`M(l-v`3);_.CSb`M=p+v`3+"."+v`9s(`Fu=X.get()`6(!CSvalidatevid||$6.get()>0)&&u&&u`V^[0-9a-f]{40}$/))$p(u);else{`4s=M+"//"+CSurl+"/"+$D+"?"+"uid="+u+"&callfunc=_I`1setUid"+"&useTPC="+CStpc+"&useSC="+CSsessiononly`6O)V(s);`XA.write("<script type=\\"text/javascript\\" src=\\""+s+"\\"></script>"`i2 1`9p(u){X.set($u=u);_.CSvid=u`50,8);`IN`S`Fe=N[i];$g(e`52),e`d0)=="1",i);}$1=0;$b(`i0 Q(c,t,p`L!Z`p$7=$G();W=$K();`T;`4u=t?t.slice(0,200):A.title;`4q=$w(p?""+p:"",1)`6c`Fs=screen;`4m=A.lastModified?Date.parse(A.lastModified)/1000:0`6m<0)m=0;`4ns=G.appName=="Netscape"?1:0;`4d=ns?s.pixelDepth:s.colorDepth`6!d)d=0;`4e="7c"+c+"&&&"+m`YD(u)`YMath.round(`H/1000)`YD($7)`Ys.width`Ys.height`Yd`Y(s.availWidth?s.availWidth:0)`Y(s.availHeight?s.availHeight:0)`Y(ns?G.language:G.userLanguage)`Y(ns?innerWidth:A.body?A.body.clientWidth:0)`Y(ns?innerHeight:A.body?A.body.clientHeight:0)`Y(($Z?4:0)+(G.javaEnabled()?2:0)+1)`YD(q);$4(e);}$j(c,u,q)`6!CStitle)CStitle=t?t:""`6!CSpath)CSpath=p?""+p:""`6CSinfoOnload&&!O)O=1;Z=0;$b()`9k(c,t,p){`T;`4u=t?(""+t).slice(0,200):"";`4q=$w(p?""+p:"")`6c`Fe="9c"+c+"&&&&"+D(u)`YMath.round(`H/1000)+"&&&&&&&&&&&"+D(q);$4(e);}$j(c,u,q)`9j(c,t,p`L!c)c="00000";H("INF","id: \'"+c+"\', title: \'"+t+"\', page`a: \'"+p.replace(/\\?.*/, "")+"\'")`9T(c,ff,t,p`L$n!=ff.`a`Ff=ff.form?ff.form:ff;`4s="form interaction/"+(`Qf.ICSfident!=I?f.ICSfident.value:f.`a?f.`a:f.id==""?"no`a":f.id)+"/# "+(p?p:ff.`a);$k(c,t?t:"Form Interaction",s);}$n=ff.`a`9J(c,t,p`Fl=$v.get();`4m=R.toString()`6l==m`p$v.set(m);I`1sendInfo(c,t,p)`9H(){$3=""`9W(k,v`Lk)$3+=D(k)+"="+D(v)+"&"`9_0(c,d,n){`T`6!d)d=$3`6!c||!d`p`4e="V=2&CTIM="+`H+"&CID="+c+"&POI&"+d;$4(e,1,n);I`1clearUD()`9__(i,e,c,o,f){K(T,[i,-1,e,c,o,f])`6_.`Grs)`Grs()`9B(i,m){K(T,[i,`Qm=="undefined"?2:m?1:0])`6_.`Grs)`Grs()`94(d,u,n`Fi=N`3;N[i]=(u?"1":"0")+"|"+d;$2()`6!$1)$g(d,u,i,n);H("INF","Event: "+$x(d,u))`92(`L$d){$A();--$d;`2;}if(Y`pY=1;setTimeout("_I`1saveEvents2()",1)`9A(`Fl=[]`h`4i=N`3-1;0<=i;--i`Ll`3==CSmaxcache)`g`4e=N[i]`6e)K(l,e);}$i.s`R(l);Y=0`9g(d,u,i,n`Fm=new Image(3,7);`uindex=i;`uretries=$Q;`u`a="Progress"`6n)`unotify=n;`4j=P`3;m.onload=new Function("if(window.`kDone)`kDone("+j+");");m.onerror=new Function("if(window.`kRetry)`kRetry("+j+");");m.onabort=m.onerror;m.src=$x(d,u);P[j]=m`9h(i`L!`b||!P[i]`p`4m=P[i]`6$e(m)`p`u`a="Done"`6`unotify)`unotify();N[`uindex]="";$2()`9Y(i`L!P[i]`p`4m=P[i]`6`uretries-- >0&&!$e(m)){m.src=m.src;}else{H("RES", "Failed: "+m.src);$h(i);}}`0 $e(m`vm.complete&&(`Q`u`a==I||`u`a=="Done")`9x(d,u`Fs=(u?$X+"?UID=":$U+"?")+$u+"&";`2 M+"//"+CSurl+"/"+s+d`9w(p,c`Lp`Fi=p`A"://")`6i<2||9<i)p=M+"//"+(A.`Z?A.`Z:"")+(p`A"/")?"/":"")+p;}`Xp=""+R`6c`LW)p=$8("csref",W,p`iXp=$8("csref","",p`r p.slice(0,900)`9K(`Fr=$r("ICSref")`6r=="|")r=""`6r){$m("ICSref","")`6r=="-")r="";}else{`4l=$q()?parent.`U.location:R;r=$F("csref",""+l`i2 r`9G(`Fr=$r("ICSRCT")`6r`Lr=="-")r="";$m("ICSRCT",""`iXr=$q()?parent.`U.referrer:$N;`2 r.replace(/^https?:\\/\\/(.+)/,"http://$1").slice(0,900)`9q(`Fs`6S())eval("try{s=\'\'+parent.`U.location==`U.referrer;}catch(e){}"`r s`9b(`L!CSsu||$c||Z&&!`m||$1`p$c=1`6!S()`cNo good DOM support"`r;}if(CSsid&&!`m`L!E.test()`cNo session `Cs"`r;}if(!C.test()`cNo stored `Cs"`r;}}if(CSsid&&CSsd`Fi=A.`Z`ACSsd)`6i<0||i!=A.`Z`3-CSsd`3`cDomain/CSsd mismatch"`r;}}`4u`6CSsid`Fs=$z.get()`6!s){s=`j`H*Math.random());$z.set(s);}u=M+"//"+CSsl+"/survey-accounts/"+CSsid+"/survey.js?"+s;}`Xu=M+"//"+CSsl+"/survey/main.js"`6O)V(u);`X$0(_,"load",`0(){V(u);})`9_(c,v){c.add(v`i0 H(t,m`L!CSdebug`pm=t+": "+m`6!L||L.closed){L=_.open("","_I`1Util_errorWindow","height=300,width=400,resizable=yes,scrollbars=yes")`6!L){alert(m`r;}if(L.booted)L.`U.body.innerHTML+="<hr/>";else{`4d=L.`U;d.open();d.write("<html><body><b>ClientStep debug log:</b></body></html>");d.close();L.booted=1;}}L.`U.body.innerHTML+="<pre>"+m.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</pre>"`90(e,n,h`Le.addEventListener)e.addEventListener(n,h,0);`Xif(e.attachEvent)e.attachEvent("on"+n,h);else{`4p=e["on"+n];e["on"+n]`Ov`Fa=p(v`r h(v)&&a;}}}`0 V(u`Fs=A.createElement("script");s.type="text/javascript";s.src=u;A.body.appendChild(s)`99(`Fd=A.`Z`6d`V\\.[0-9]{1,3}$/))`2"";`4`n)`6i<0)`2"";`n,i-1)`6-1<i&&d.toLowerCase()`V.*[.](co|com|net|org|ltd|gov)[.][A-Za-z]*$/))`n,i-1)`60<i)d=d`5i`r 5<d`3?d:"";}`0 D(s`v$S($O(s)`i0 U(s`v$L($_3(s))`9O`ws=String(s);`zf(c==0xFFFE||c==0xFFFF`P0xDC00<=c&&c<0xE000`P0xD800<=c&&c<0xDC00`Ln==i){e();`g}`4d=s`Ji++)`6d<0xDC00||0xE000<=d){e();`B}c=0x10000+((c-0xD800)<<10)+(d-0xDC00);}if(c<0x800)`80xC0+(c>>6`l&0x3F));`Xif(c<0x10000)`80xE0+(c>>12`l>>6&0x3F`l&0x3F));`X`80xF0+(c>>18`l>>12&0x3F`l>>6&0x3F`l&0x3F)`i2 r`9L(s){`0 e(t){r+="\\uFFFD"`6t)`s)`6c<0x80||0xC0<=c&&c<0x100)`g++i;}}`zf(c>=0xFE){e(1);`B}if(!(c&0x40)){e(1);`B}`4m=c&0x20?c&0x10?c&0x8?c&0x4?5:4:3:2:1;c&=(1<<(6-m))-1`h`4j=0;j<m;++j`Li==n){e();c=-1;`g}`4d=s`Ji)`6d<0x80||0xc0<=d){e(1);c=-1;`g}c<<=6;c|=d&0x3F;++i;}if(c<0)continue`6c<(1<<(5*m+1))`P0xD800<=c&&c<0xE000`Pc==0xFFFE||c==0xFFFF`Pc>=0x110000`P0x10000<=c){c-=0x10000;`80xD800|(c>>10));`80xDC00|(c&0x3FF)`iX`8c`i2 r`9S(s`Fu="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ*-._";`4h="0123456789ABCDEF";s=String(s);`4r="";`Is`S`Fc=s`di)`6u`Ac)<0`Fn=c`J0);r+="%"+h`dn>>4)+h`dn&0xF`iXr+=c;}`2 r`9_3`w`4h="0123456789ABCDEF";`4r="";`4n=s`3;`4i=0`h;;`Fj=s`A"%",i)`6j<0){r+=s`5i);`g}r+=s`5i,j);i=j+3`6n<i){e();`g}`4d1=h`As`dj+1).toUpperCase());`4d2=h`As`dj+2).toUpperCase())`6d1<0||d2<0){e();`B}`80x10*d1+d2`i2 r`9(n,d,p,m,b){`7`Z=d;`W=[];`7`CMap={};`q=0;`e=n+".";`7duration=p?1000*60*60*24*365*2:0;`7maxCookies=m;`7_test`Kthis,"_t");`7b`MFunc=b;}`4J=$.prototype;J.register`Oc`Fl=`W;K(l,c);`7`CMap[c.`a]=c;};J.test`O`Fv=""+(`H*Math.random());`7_test.set(v);`4w=`7_test.get();`7_test.set(""`r v==w;};J.get`On`v`Q`7properties[n]==I?[]:`7properties[n];};J.set`On,v){`7properties[n]=v;};J.read`O`Fa,c,d,e,f,i,j,k,l,m,n,o,p,r,s,v`hi=0;i<`W`S)`W[i].value=[];`q=0;d="0 "+D(`7`Z);r={};c=A.`C;i=0;while(i<c`3`Lc`Ji)==32){++i;`B}j=i;i=c`A";",i)`6i<0)i=c`S`6i-j<=`e`3)`Bk=j+`e`3`6c`5j,k)!=`e)`Bj=c`A"=",k)`6j<0)`Bo=`jc`5k,j))`6o==0)`Be="";k=c`A":",j+1)`6-1<k&&k<i){e=c`5j+1,k);j=k;}if(e!=d)a=e;(r[e]||(r[e]=[]))[o-1]=c`5j+1,i-1)`6`q<o)`q=o;}r=r[d]||`Qa!="undefined"&&r[a]`6!r||!r[0]`ps=r[0];j=s`A"@")+1`6j<=0`pn=`js`50,j-1))`6!n`pf=1;p="";i=0`h;;){k=j`6f){j=s`A"@",j)+1`6j<=0`pl=`js`5k,j-1))`6j+l!=s`3`pf=0;`B}l=j;j=s`A"&",j)+1`6j<=0)j=s`A",",l)+1;p+=s`5k,j<=0?s`3:j-1)`6j<=0){++i`6i<n`L`Qr[i]==I`ps=r[i];j=0;f=1;`B}}k=p`A"/")`6k<0)k=p`3;`4`a=p`50,k);v=[];while(k<p`3){m=k+1;k=p`A"/",m)`6k<0)k=p`3;K(v,p`5m,k));}if(0<v`3&&`7`CMap[`a])`7`CMap[`a].value=v`6i==n`pp="";}};J.getCookieParams`Od`Fe`6d){e=new Date();e.setTime(e.getTime()+d`i2(e?"; expires="+e.toGMTString():"")+"; path=/"+(`7`Z?"; `Z="+`7`Z:"");};J.write`Ob`Fc,d="",i,j,k,l,n,m,p,q,r,s="",v;l=3832-`e`3-d`3;m=l*`7maxCookies`hi=0;i<`W`S){c=`W[i];v=c.value`hj=0;j<v`3;++j){q=""`6!j`Ls)q+="&";q+=c.`a;}q+="/"+(`Qv[j]==I?"":v[j])`6m<s`3+q`3)`gs+=q;}}n=`j(s`3+l-1)/l);r=`7getCookieParams(`7duration);j=0`hi=0;i<n;++i){k=j;j+=l`6s`3<j)j=s`3;p=(j-k)+"@"+s`5k,j)`6!i)p=n+"@"+p;A.`C=`e+(i+1)+"="+d+p+r;}r=`7getCookieParams(-1)`hi=n;i<`q;++i)A.`C=`e+(i+1)+"="+r`6b&&`7b`MFunc)`7b`MFunc();};J.getB`M`Om`Fs="";`I`W`S`Fc=`W[i]`6!c.b`M) `B`4v=c.value`h`4j=0;j<v`3;++j`Fq=""`6!j`Ls)q+="%12";q+=c.`a;}q+="%11"+(`Qv[j]==I?"":v[j])`6m<s`3+q`3)`gs+=q;}}`2 s;};J.`t`Ov`Fl=v.split("%12");`Il`S`Fm=l[i].split("%11")`61<m`3&&m[0]&&`7`CMap[m[0]]`Fw=[]`h`4j=1;j<m`3;++j)w[j-1]=m[j];`4c=`7`CMap[m[0]]`6c.`t)c.`t(c,w);`Xc.value=w;}}`7write(1);};`0 B(s,n,b,a){`7stash=s;`7`a=D(n);`7b`M=b;`7`t=a;`7value=[];s.register(this`i4F=B.prototype;F.g`R`O`ov=`7value;`4l=[];`Iv`S)K(l,U(v[i])`r l;};F.get`O`ov=`7g`R(`r `Qv[0]==I?"":v[0];};F.s`R`Ov`ol=[];`Iv`S)K(l,D(v[i]?v[i]:""));`7value=l;`7stash.write(`7b`M);};F.set`Ov){v=String(v);`7s`R(v==""?[]:[v]);};F.manip`Of){`7s`R(f(`7g`R()));};F.contains`Oe`v$l(`7g`R(),""+e);};F.add`Ov`L!$f(v))v=[""+v];`7manip(`0(w`v$5(w,v);});};F.sub`Ov`L!$f(v))v=[""+v];`7manip(`0(w`v$5(w,v,1);});};F.getAt`Oi`Fv=`7g`R(`r v[i]?v[i]:"";};F.setAt`Oe,i){`7manip(`0(w){w[i]=""+e;`2 w;});};`0 $f(x`vx && x.constructor && x.constructor == Array;}`0 K(a,e){a[a`3]=e`9l(a,e){`Ia`S)if(a[i]==e)`2 1;`2 0`95(a,b,d`Fc=d?[]:$5(b,[],1);`Ia`S`Fe=a[i]`6!$l(b,e))K(c,e`i2 c`9t(n,u`Fj=0`h;;`Fi=u.toLowerCase()`An+"=",j)`6i<0)`gj=i+n`3+1`60<i`Fc=u`di-1)`6c!="#"&&c!="&"&&c!="?")`B}`4k=u`A"#",j)`6k<0)k=u`3;`4l=u`A"&",j)`6l<0)l=u`3`6l<k)k=l;`2[i,j,k];}`2""`9a(n,u`L!u)u=""+R;`4p=$t(n,u`r p?u`5p[1],p[2]):""`9F(n,u`vU($a(n,u))`98(n,v,u`Fi=$t(n,u)`6v){v=D(v)`6i)u=u`50,i[1])+v+u`5i[2]);else{v="?"+n+"="+v;i=u`A"?")`6i<0)u+=v;`Xu=u`50,i)+v`Yu`5i+1);}}`Xif(i`Li[2]==u`3||u[i[2]]=="#")--i[0];else++i[2];u=u`50,i[0])+u`5i[2]`i2 u;}`0 S(`Fn=G.appName.toLowerCase();`4a=G.userAgent;`4v=G.appVersion;`4m;`2 n=="netscape"?a`Vgecko\\//i):(m=a`Vopera[ \\/]?([0-9]+).[0-9]+/i))?7<m[1]:n=="microsoft internet explorer"&&!v`Vmacintosh/i)&&(m=v`Vmsie ([0-9]+).([0-9]+)/i))&&(5<m[1]||m[1]==5&&4<m[2])`9r(n`Fc=A.`C.split("; ");`Ic`S`Fp=c[i].split("=")`6p[0]==n)`2 p[1]?U(p[1]):"";}`2""`9m(n,v){A.`C=n+"="+D(v)+"; `Z="+CSsd+"; path=/";}`4e=CSenable;`4n`O){};`0 x(){_.I`1sendInfo=e?Q`fEvent=e?$k:n`DformEvent=e?$T`fInfoNoTop=e?Q`fInfoNoRefresh=e?$J`fInfoNoCache=e?Q`fBigInfo=e?Q`fSmallInfo=e?Q:n`DclearUD=e?$H:n`DaddUD=e?$W`fUD=e?$_0:n`DlaunchSurvey=e?$__:n`DpreviewSurvey=e?$B:n`DsurveySupported=e?S:n;}x();`b=x`6!e)`2`DUtil_error=H`DUtil_addEventHandler=$0`DUtil_loadEcmaScript=V`DUtil_computeCookieDomain=$9`DUtil_encode=D`DUtil_decode=U`DgetReferrer`O`v$7;}`DgetCSref`O`vW;}`DgetManualSurveyTriggers`O`Fl=T;T=[];`2 l};_._I`1saveEvents2=$A;_.`kDone=$h;_.`kRetry=$Y;_._I`1setUid`Ou){$6.set(1);$p(u`i6!CSsd)CSsd=$9();`4d="net.instadia.clientstep",m=CS`C`a,E=new $(m?m+".s":d+".session",CSsd,0,1,$o),C=new $(m?m+".p":d+".persist",CSsd,1,CSmaxpersist,$o),$v`KE,"f"),$6`KE,"p"),$y`KE,"d",1),$C`KE,"l",1,$_),$V`KE,"n"),$I`KE,"t"),$_2`KE,"ss",1),$_1`KE,"ssb"),$z`KE,"i"),X`KC,"u",1),$E`KC,"d",1,$_),$_$`KC,"s",1,$_),$M`KC,"sp",1),$P`KC,"spb"),$i`KC,"e")`D`CLater=$C`D`CNext=$V`D`CTrigger=$I`D`CDone=$E`D`CSample=$_$`D`CSs=$_2`D`CSsb=$_1`D`CSp=$M`D`CSpb=$P`6CSsessiononly||!C.test())C.duration=0;`4$Z=C.test();_._I`1stashSession=E;_._I`1stashPersist=C`6$y.get())CSdebug=1`DdebugSession`O){CSdebug=1;$y.set(1`i6!CSscrerr&&!_.onerror)_.onerror`Od,p,l,c){H("SCR","Error: "+(p?p+":"+l+": "+d:d)`r true;};$R()`6CScustomvid){X.set(CScustomvid);$6.set(0);}_.CSvid="";`4l=$i.g`R()`h`4i=l`3-1;0<=i;--i)K(N,l[i]);$2()`6`m)O=1`6CSonload&&S()&&!O){O=1;$0(_,"load",$s`iX$s();})();';for(var I=61;I>=0;)S=S.replace(eval("/`"+String.fromCharCode(I+(I<10?48:I<36?55:61))+"/g"),R[I--]);return S})());